<%
#Copyright (C) 2010-2020 Sideview LLC.  All Rights Reserved.
%>
<%inherit file="/base.html" />

<link type="text/css" href="${canary_static_url_prefix}lib/editor/editor.css" rel="stylesheet" />
<script language="javascript" type="text/javascript" src="${canary_static_url_prefix}lib/jquery/jquery-3.1.0.js"></script>
<script language="javascript" type="text/javascript" src="${canary_static_url_prefix}lib/editor/forms.js"></script>

<script language="javascript" type="text/javascript">

$(document).ready(function() {
    $("#insertionType").change(function() {
        var type= $(this).val();
        var insertBeforeRow = $("#insertBeforeRow");
        if (type=="insertBefore") {
            insertBeforeRow.css("display","table-row");
        } else {
            insertBeforeRow.css("display","none");
        }
    });
});
</script>
<div class="outerWrapper">

<h2>Add New Module</h2>


<form id="chooseModuleForm" action="/splunkd/__raw/sv_module/edit" method="GET">
<table class="editorTable" cellspacing="0">
    <tr>
        <td class="labelCell">add a new module below:</td>
        <td>
            <input type="text" class="moduleSelector" name="parentModuleId" autocomplete="off" /><br>
            <input type="hidden" name="parentModuleClass" class="classField" />
        </td>
    </tr>

    <tr>
        <td class="labelCell">
            Make it a
        </td>
        <td>
            <select name="moduleClass" id="moduleClass">
% for name in moduleClasses:
                <option value='${name}'>${name}</option>
% endfor
            </select>
        </td>
    </tr>

    <tr>
        <td class="labelCell">and</td>
        <td>
            <select name="insertionType" id="insertionType">
                <option value="append">just add the new module as the last child</option>
                <option value="insertBefore">insert the new module before...</option>
            </select>
        </td>
    </tr>
    <tr id="insertBeforeRow" style="display:none">
        <td class="labelCell">... this existing module: </td>
        <td>
            <input type="text" class="moduleSelector" name="insertBeforeModuleId" autocomplete="off" /><br>
            <input type="hidden" name="insertBeforeModuleClass" class="classField" />
        </td>
    </tr>
    <tr>
        <td colspan="2" class="buttonCell">

            <input type="hidden" name="app" id="app" value="${app}" />
            <input type="hidden" name="view" id="view" value="${view}" />
            <input type="hidden" name="moduleId" id="moduleId" value="_new" />

            <input type="submit" value="set module params" class="submit"/>
        </td>
    </tr>
</table>
</form>
</table>
</div>